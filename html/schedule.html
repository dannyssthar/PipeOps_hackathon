<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Appointment</title>
    <script src="https://kit.fontawesome.com/2f26397946.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="schedule.css">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <nav>
        <div class="nav-elements">
            <div class="logo">THETA</div>
            <div class="nav-links">
                <a href="../index.html" class="nav-link">Home</a>
                <a href="schedule.html" class="nav-link">Schedule Appointment</a>
                <a href="live-chat.html" class="nav-link">Live Chat</a>
                <a href="about.html" class="nav-link">About Us</a>
            </div>
            <div class="nav-button">
                <button class="signINbtn">Sign In</button>
                <button class="signUPbtn">Sign Up</button>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <div class="animated-bg"></div>
        <div class="animated-bg-secondary"></div>
        <div class="hero-text">
            <span id="hero-name">Schedule An Appointment</span><br>
        </div>
        <br>
        <div class="h2-texts">
            <button onclick="toggleCalendar()" class="schedule-button">Schedule</button>
        </div>
    </section>

    <div class="container">
        <div id="calendar-container" class="calendar-container">
            <div class="calendar">
                <div class="header">
                    <button id="prevMonth">Previous</button>
                    <h1 id="monthYear"></h1>
                    <button id="nextMonth">Next</button>
                </div>
                <table class="calendar-table">
                    <thead>
                        <tr>
                            <th>Sun</th>
                            <th>Mon</th>
                            <th>Tue</th>
                            <th>Wed</th>
                            <th>Thu</th>
                            <th>Fri</th>
                            <th>Sat</th>
                        </tr>
                    </thead>
                    <tbody id="calendarBody">
                        <!-- Calendar dates will be injected here -->
                    </tbody>
                </table>
            </div>
            <button class="signUPbtn" id="submit-button">Submit Health Data</button>
        </div>
    </div>

    <footer>Created By DECEE</footer>

    <div class="float-button">
        <span><i class="fas fa-comment-alt"></i></span>
        <div class="notification-indicator"></div>
    </div>

    <script src="../javascript/frontend.js"></script>
    <script src="../javascript/script.js"></script>
    <script>
        function toggleCalendar() {
            const calendarContainer = document.getElementById('calendar-container');
            if (calendarContainer.style.display === 'none' || calendarContainer.style.display === '') {
                calendarContainer.style.display = 'block';
                if (!calendarContainer.dataset.initialized) {
                    initializeCalendar();
                    calendarContainer.dataset.initialized = 'true';
                }
            } else {
                calendarContainer.style.display = 'none';
            }
        }

        function initializeCalendar() {
            const calendarBody = document.getElementById('calendarBody');
            const monthYear = document.getElementById('monthYear');
            const prevMonth = document.getElementById('prevMonth');
            const nextMonth = document.getElementById('nextMonth');

            let currentDate = new Date();

            function renderCalendar(date) {
                calendarBody.innerHTML = '';
                const year = date.getFullYear();
                const month = date.getMonth();
                const firstDay = new Date(year, month, 1).getDay();
                const lastDate = new Date(year, month + 1, 0).getDate();
                const prevLastDate = new Date(year, month, 0).getDate();

                monthYear.innerHTML = `${date.toLocaleString('default', { month: 'long' })} ${year}`;

                let dayCounter = 1 - firstDay;

                for (let week = 0; week < 6; week++) {
                    const row = document.createElement('tr');

                    for (let day = 0; day < 7; day++) {
                        const cell = document.createElement('td');

                        if (dayCounter < 1) {
                            cell.textContent = prevLastDate + dayCounter;
                            cell.classList.add('other-month');
                        } else if (dayCounter > lastDate) {
                            cell.textContent = dayCounter - lastDate;
                            cell.classList.add('other-month');
                        } else {
                            cell.textContent = dayCounter;
                            if (dayCounter === date.getDate() && month === new Date().getMonth() && year === new Date().getFullYear()) {
                                cell.classList.add('today');
                            }
                        }

                        row.appendChild(cell);
                        dayCounter++;
                    }

                    calendarBody.appendChild(row);
                }
            }

            prevMonth.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar(currentDate);
            });

            nextMonth.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar(currentDate);
            });

            renderCalendar(currentDate);
        }
    </script>
</body>
</html>
